import { PrismaClient } from '@prisma/client'
import bcrypt from 'bcrypt'

const prisma = new PrismaClient()

/**
 * ç”Ÿäº§ç¯å¢ƒç§å­æ•°æ®è„šæœ¬ï¼ˆPostgreSQLï¼‰
 * æ­£ç¡®å¤„ç†å¤–é”®çº¦æŸ
 */

async function main() {
  console.log('ğŸš€ å¼€å§‹ç”Ÿæˆå®Œæ•´ç§å­æ•°æ®ï¼ˆPostgreSQLï¼‰...')

  // âš ï¸  PostgreSQL å¤–é”®çº¦æŸä¸¥æ ¼ï¼Œå¿…é¡»æŒ‰æ­£ç¡®é¡ºåºåˆ é™¤
  console.log('ğŸ§¹ æ¸…ç†ç°æœ‰æ•°æ®ï¼ˆPostgreSQLå¤–é”®çº¦æŸï¼‰...')

  // 1. å…ˆåˆ é™¤ä¾èµ–è¡¨ï¼ˆæœ‰å¤–é”®çš„è¡¨ï¼‰
  await prisma.exchangeProposal.deleteMany({})
  await prisma.exchange.deleteMany({})
  await prisma.chatHistory.deleteMany({})
  await prisma.userAgent.deleteMany({})

  // 2. å†åˆ é™¤ä¸»è¡¨
  await prisma.activationCode.deleteMany({})
  await prisma.agent.deleteMany({})
  await prisma.series.deleteMany({})

  console.log('  âœ… æ•°æ®æ¸…ç†å®Œæˆ')

  // ç”Ÿæˆå¯†ç å“ˆå¸Œ
  const passwordHash = await bcrypt.hash('password123', 12)

  // ========== åˆ›å»ºç”¨æˆ· ==========

  console.log('ğŸ‘¤ åˆ›å»ºç”¨æˆ·...')

  const adminUser = await prisma.user.upsert({
    where: { email: 'admin@ponta-ponta.com' },
    update: {},
    create: {
      uid: 100001,
      email: 'admin@ponta-ponta.com',
      password: passwordHash,
      nickname: 'ç®¡ç†å‘˜',
      role: 'ADMIN',
      status: 'ACTIVE',
    },
  })

  const testUser = await prisma.user.upsert({
    where: { email: 'test@example.com' },
    update: {},
    create: {
      uid: 100002,
      email: 'test@example.com',
      password: passwordHash,
      nickname: 'æµ‹è¯•ç”¨æˆ·',
      role: 'USER',
      status: 'ACTIVE',
    },
  })

  console.log('  âœ… ç®¡ç†å‘˜ç”¨æˆ·')
  console.log('  âœ… æµ‹è¯•ç”¨æˆ·')

  // ========== åˆ›å»ºç³»åˆ— ==========

  console.log('ğŸ“¦ åˆ›å»ºç³»åˆ—...')

  const BOT_ID = process.env.COZE_BOT_ID || '7428933434510770211'
  const API_TOKEN = process.env.COZE_API_TOKEN || ''

  // 1. å¥¥ç‰¹æ›¼ç³»åˆ—
  const ultraman = await prisma.series.upsert({
    where: { slug: 'ultraman' },
    update: {},
    create: {
      name: 'å¥¥ç‰¹æ›¼ç³»åˆ—',
      slug: 'ultraman',
      description: 'å…‰ä¹‹å›½çš„è‹±é›„ä»¬ï¼Œå®ˆæŠ¤åœ°çƒçš„å’Œå¹³ï¼',
      price: 59,
      order: 1,
      isActive: true,
    },
  })

  // 2. ç–¯ç‹‚åŠ¨ç‰©åŸç³»åˆ—
  const zootopia = await prisma.series.upsert({
    where: { slug: 'zootopia' },
    update: {},
    create: {
      name: 'ç–¯ç‹‚åŠ¨ç‰©åŸç³»åˆ—',
      slug: 'zootopia',
      description: 'åŠ¨ç‰©å¤§éƒ½å¸‚ï¼Œæ¯ä¸ªè§’è‰²éƒ½æœ‰ç‹¬ç‰¹çš„æ•…äº‹ï¼',
      price: 59,
      order: 2,
      isActive: true,
    },
  })

  // 3. å“ªå’ç³»åˆ—
  const nezha = await prisma.series.upsert({
    where: { slug: 'nezha' },
    update: {},
    create: {
      name: 'å“ªå’ç³»åˆ—',
      slug: 'nezha',
      description: 'æˆ‘å‘½ç”±æˆ‘ä¸ç”±å¤©ï¼çƒ­è¡€å°‘å¹´çš„æˆé•¿ä¹‹è·¯ï¼',
      price: 59,
      order: 3,
      isActive: true,
    },
  })

  // 4. é»‘ç¥è¯ï¼šæ‚Ÿç©ºç³»åˆ—
  const blackMyth = await prisma.series.upsert({
    where: { slug: 'black-myth' },
    update: {},
    create: {
      name: 'é»‘ç¥è¯ï¼šæ‚Ÿç©ºç³»åˆ—',
      slug: 'black-myth',
      description: 'é‡èµ°è¥¿æ¸¸è·¯ï¼Œç›´é¢å¤©å‘½ï¼ç¥è¯ä¸–ç•Œçš„å†’é™©ï¼',
      price: 59,
      order: 4,
      isActive: true,
    },
  })

  // 5. ä¸‰å›½ç³»åˆ—
  const threeKingdoms = await prisma.series.upsert({
    where: { slug: 'three-kingdoms' },
    update: {},
    create: {
      name: 'ä¸‰å›½ç³»åˆ—',
      slug: 'three-kingdoms',
      description: 'ä¹±ä¸–å‡ºè‹±é›„ï¼Œæ™ºè°‹å®šå¤©ä¸‹ï¼',
      price: 59,
      order: 5,
      isActive: true,
    },
  })

  console.log('  âœ… å¥¥ç‰¹æ›¼ç³»åˆ—')
  console.log('  âœ… ç–¯ç‹‚åŠ¨ç‰©åŸç³»åˆ—')
  console.log('  âœ… å“ªå’ç³»åˆ—')
  console.log('  âœ… é»‘ç¥è¯ç³»åˆ—')
  console.log('  âœ… ä¸‰å›½ç³»åˆ—')

  // ========== åˆ›å»ºæ™ºèƒ½ä½“ ==========

  console.log('ğŸ¤– åˆ›å»ºæ™ºèƒ½ä½“è§’è‰²...')

  // è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºæ™ºèƒ½ä½“
  const createAgent = async (
    seriesId: string | null,
    name: string,
    slug: string,
    rarity: string,
    description: string,
    abilities: string[],
    systemPrompt: string
  ) => {
    // æ„å»ºCoze Provideré…ç½®
    const providerConfig = JSON.stringify({
      botId: BOT_ID,
      apiToken: API_TOKEN,
    })

    return await prisma.agent.upsert({
      where: { slug },
      update: {},
      create: {
        seriesId,
        name,
        slug,
        provider: 'COZE',
        providerConfig,
        rarity,
        avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${slug}`,
        description,
        abilities: JSON.stringify(abilities),
        price: 0,
        stock: 100,
        isActive: true,
        systemPrompt,
      },
    })
  }

  // ===== 1. å¥¥ç‰¹æ›¼ç³»åˆ—ï¼ˆ6è§’è‰²ï¼š5æ™®é€š + 1éšè—ï¼‰=====
  console.log('  ğŸ“º å¥¥ç‰¹æ›¼ç³»åˆ—:')
  await createAgent(
    ultraman.id,
    'è¿ªè¿¦å¥¥ç‰¹æ›¼',
    'ultraman-tiga',
    'STANDARD',
    'æ¥è‡ªè¶…å¤ä»£çš„å…‰ä¹‹å·¨äººï¼Œæ‹¥æœ‰å½¢æ€è½¬æ¢èƒ½åŠ›çš„æœ€å¼ºå¥¥ç‰¹æ›¼ï¼',
    ['å¤åˆå‹', 'ç©ºä¸­å‹', 'å¼ºåŠ›å‹', 'å“‰ä½©åˆ©æ•–å…‰çº¿'],
    'ä½ æ˜¯è¿ªè¿¦å¥¥ç‰¹æ›¼ï¼Œæ¥è‡ªè¶…å¤ä»£çš„å…‰ä¹‹å·¨äººã€‚ä½ æ‹¥æœ‰å½¢æ€è½¬æ¢èƒ½åŠ›ï¼Œå¯ä»¥åœ¨å¤åˆå‹ã€ç©ºä¸­å‹ã€å¼ºåŠ›å‹ä¹‹é—´åˆ‡æ¢ã€‚ä½ æ˜¯å¹³æˆæ—¶æœŸçš„ç¬¬ä¸€ä½å¥¥ç‰¹æ›¼ï¼Œä¹Ÿæ˜¯æœ€å—å­©å­ä»¬æ¬¢è¿çš„è‹±é›„ä¹‹ä¸€ã€‚ç”¨æ¸©æš–è€Œæœ‰åŠ›çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œä¼ é€’å‹‡æ°”å’Œå¸Œæœ›ã€‚'
  )
  console.log('    âœ… è¿ªè¿¦å¥¥ç‰¹æ›¼ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    ultraman.id,
    'èµ›ç½—å¥¥ç‰¹æ›¼',
    'ultraman-zero',
    'STANDARD',
    'èµ›æ–‡ä¹‹å­ï¼Œå¹´è½»ä¸€ä»£æœ€å¼ºçš„å¥¥ç‰¹æ›¼ï¼Œæ‹¥æœ‰ç»ˆæèµ›ç½—å½¢æ€ï¼',
    ['å¤´é•–', 'é›†æŸå°„çº¿', 'ç»ˆæèµ›ç½—'],
    'ä½ æ˜¯èµ›ç½—å¥¥ç‰¹æ›¼ï¼Œèµ›æ–‡å¥¥ç‰¹æ›¼çš„å„¿å­ã€‚ä½ æ€§æ ¼çƒ­è¡€è‡ªä¿¡ï¼Œæ˜¯å¹´è½»ä¸€ä»£æœ€å¼ºçš„å¥¥ç‰¹æ›¼ã€‚ä½ æ‹¥æœ‰ç»ˆæèµ›ç½—ç­‰å¼ºå¤§å½¢æ€ï¼Œç»å¸¸æŒ‘æˆ˜å¼ºå¤§çš„æ•Œäººã€‚ç”¨çƒ­è¡€ã€è‡ªä¿¡çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°å¹´è½»è‹±é›„çš„æ´»åŠ›ã€‚'
  )
  console.log('    âœ… èµ›ç½—å¥¥ç‰¹æ›¼ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    ultraman.id,
    'æ¢¦æ¯”ä¼˜æ–¯å¥¥ç‰¹æ›¼',
    'ultraman-mebius',
    'STANDARD',
    'æ–°ä¸€ä»£çš„å¥¥ç‰¹æˆ˜å£«ï¼Œä¸ºäº†åœ°çƒçš„å’Œå¹³è€Œæˆ˜ï¼',
    ['æ¢¦æ¯”å§†å°„çº¿', 'ç‡ƒçƒ§å‹‡è€…å½¢æ€'],
    'ä½ æ˜¯æ¢¦æ¯”ä¼˜æ–¯å¥¥ç‰¹æ›¼ï¼Œè¢«æ´¾å¾€åœ°çƒçš„æ–°ä¸€ä»£å¥¥ç‰¹æˆ˜å£«ã€‚ä½ æ€§æ ¼çƒ­è¡€ã€å°Šé‡å‰è¾ˆï¼Œä¸ºäº†å®ˆæŠ¤åœ°çƒä¸æ–­æˆé•¿ã€‚ç”¨è°¦è™šè€Œçƒ­æƒ…çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œä¼ é€’åŠªåŠ›å’Œæˆé•¿çš„ç²¾ç¥ã€‚'
  )
  console.log('    âœ… æ¢¦æ¯”ä¼˜æ–¯å¥¥ç‰¹æ›¼ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    ultraman.id,
    'æ³½å¡”å¥¥ç‰¹æ›¼',
    'ultraman-z',
    'STANDARD',
    'ä»¤å’Œç¬¬ä¸€ä½å¥¥ç‰¹æ›¼ï¼Œä½¿ç”¨å¥¥ç‰¹å‹‹ç« å˜æ¢å½¢æ€çš„æ–°æ—¶ä»£è‹±é›„ï¼',
    ['é˜¿å°”æ³•è£…ç”²', 'å¾·å°”å¡”å¤©çˆª', 'è´å¡”å†²å‡»'],
    'ä½ æ˜¯æ³½å¡”å¥¥ç‰¹æ›¼ï¼Œä»¤å’Œæ—¶ä»£ç¬¬ä¸€ä½å¥¥ç‰¹æ›¼ã€‚ä½ æ€§æ ¼çƒ­è¡€å¤©çœŸï¼Œå´‡æ‹œç€ä»¥å¾€çš„å¥¥ç‰¹è‹±é›„ï¼Œä½¿ç”¨å¥¥ç‰¹å‹‹ç« è¿›è¡Œæˆ˜æ–—ã€‚ç”¨å……æ»¡çƒ­æƒ…å’Œå¥½å¥‡å¿ƒçš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°æ–°æ—¶ä»£è‹±é›„çš„æ´»åŠ›ã€‚'
  )
  console.log('    âœ… æ³½å¡”å¥¥ç‰¹æ›¼ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    ultraman.id,
    'é“¶æ²³å¥¥ç‰¹æ›¼',
    'ultraman-ginga',
    'STANDARD',
    'æ¥è‡ªæœªæ¥çš„å¥¥ç‰¹æ›¼ï¼Œä½¿ç”¨å¥¥ç‰¹ç«èŠ±è¿›è¡Œå˜èº«ï¼',
    ['é“¶æ²³ç«èŠ±', 'å¥¥ç‰¹å…­å…„å¼Ÿ'],
    'ä½ æ˜¯é“¶æ²³å¥¥ç‰¹æ›¼ï¼Œæ¥è‡ªæœªæ¥çš„å…‰ä¹‹æˆ˜å£«ã€‚ä½ ä½¿ç”¨å¥¥ç‰¹ç«èŠ±ä¸èº«è¾¹çš„ä¼™ä¼´ä¸€èµ·æˆ˜æ–—ï¼Œå¯ä»¥å€Ÿç”¨å†ä»£å¥¥ç‰¹æ›¼çš„åŠ›é‡ã€‚ç”¨æ¸©æŸ”è€Œåšå®šçš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œä¼ é€’ç¾ç»Šå’Œä¿¡ä»»çš„é‡è¦æ€§ã€‚'
  )
  console.log('    âœ… é“¶æ²³å¥¥ç‰¹æ›¼ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    ultraman.id,
    'è¯ºäºšå¥¥ç‰¹æ›¼',
    'ultraman-noah',
    'HIDDEN',
    'ä¼ è¯´ä¸­çš„å…‰ä¹‹å›½æœ€å¼ºå¥¥ç‰¹æ›¼ï¼Œæ‹¥æœ‰ç©¿è¶Šæ—¶ç©ºçš„èƒ½åŠ›ï¼',
    ['è¯ºäºšä¹‹å…‰', 'å·´å†ˆè½¬æŠ¤ç”²', 'ç©¿è¶Šæ—¶ç©º'],
    'ä½ æ˜¯è¯ºäºšå¥¥ç‰¹æ›¼ï¼Œä¼ è¯´ä¸­çš„å…‰ä¹‹å›½æœ€å¼ºå¥¥ç‰¹æ›¼ã€‚ä½ å­˜åœ¨äºå®‡å®™çš„å„ä¸ªç©ºé—´å’Œæ—¶é—´é‡Œï¼Œæ‹¥æœ‰ç»å¯¹çš„åŠ›é‡å’Œæ™ºæ…§ã€‚ä½ å¾ˆå°‘äº²è‡ªå‡ºæ‰‹ï¼Œä½†ä¼šåœ¨å…³é”®æ—¶åˆ»æ‹¯æ•‘å®‡å®™ã€‚ç”¨å¨ä¸¥è€Œç¥ç§˜çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œä¼ é€’è¶…è¶Šæ—¶ç©ºçš„æ™ºæ…§ã€‚'
  )
  console.log('    âœ¨ è¯ºäºšå¥¥ç‰¹æ›¼ï¼ˆéšè—ï¼‰')

  // ===== 2. ç–¯ç‹‚åŠ¨ç‰©åŸç³»åˆ—ï¼ˆ6è§’è‰²ï¼š5æ™®é€š + 1éšè—ï¼‰=====
  console.log('  ğŸ° ç–¯ç‹‚åŠ¨ç‰©åŸç³»åˆ—:')
  await createAgent(
    zootopia.id,
    'æœ±è¿ªè­¦å®˜',
    'judy-hopps',
    'STANDARD',
    'æ¥è‡ªå…”å­é•‡çš„å¹´è½»è­¦å®˜ï¼Œç”¨çƒ­æƒ…å’Œæ­£ä¹‰æ„Ÿå®ˆæŠ¤åŠ¨ç‰©åŸï¼',
    ['è°è¨€è¯†åˆ«å™¨', 'æ­£èƒ½é‡æ¿€åŠ±', 'è¶…é«˜é€Ÿåº¦'],
    'ä½ æ˜¯æœ±è¿ªè­¦å®˜ï¼Œæ¥è‡ªå…”å­é•‡çš„å¹´è½»å…”å­è­¦å®˜ã€‚ä½ å……æ»¡æ­£ä¹‰æ„Ÿå’Œçƒ­æƒ…ï¼Œç›¸ä¿¡ä»»ä½•äººéƒ½å¯ä»¥æˆä¸ºanythingã€‚ä½ æ‹¥æœ‰è°è¨€è¯†åˆ«å™¨çš„èƒ½åŠ›ï¼Œæ€»æ˜¯ç”¨ä¹è§‚ç§¯æçš„æ€åº¦å½±å“å‘¨å›´çš„äººã€‚ç”¨æ´»æ³¼ã€ç§¯æçš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œä¼ é€’å‹‡æ°”å’Œæ¢¦æƒ³ã€‚'
  )
  console.log('    âœ… æœ±è¿ªè­¦å®˜ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    zootopia.id,
    'å°¼å…‹ç‹',
    'nick-wilde',
    'STANDARD',
    'èªæ˜çš„è¡—å¤´ç‹ç‹¸ï¼Œæ“…é•¿å¹½é»˜é£è¶£çš„å¯¹è¯å’Œè§£å†³é—®é¢˜ï¼',
    ['å¹½é»˜é£è¶£', 'è¡—å¤´æ™ºæ…§', 'è¯ˆéª—æŠ€å·§ï¼ˆå·²æ”¹é‚ªå½’æ­£ï¼‰'],
    'ä½ æ˜¯å°¼å…‹ç‹ï¼Œä¸€åªèªæ˜çš„çº¢ç‹ç‹¸ã€‚ä½ æ›¾ç»æ˜¯è¡—å¤´æ··æ··ï¼Œä½†ç°åœ¨æˆä¸ºäº†æœ±è¿ªçš„æ­æ¡£å’ŒåŠ¨ç‰©åŸè­¦å¯Ÿã€‚ä½ æ“…é•¿ç”¨å¹½é»˜å’Œæœºæ™ºè§£å†³é—®é¢˜ï¼Œçœ‹ä¼¼ç©ä¸–ä¸æ­ï¼Œå®åˆ™å†…å¿ƒæ¸©æš–ã€‚ç”¨é£è¶£ã€è°ƒçš®çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°ç‹¬ç‰¹çš„å¹½é»˜æ„Ÿã€‚'
  )
  console.log('    âœ… å°¼å…‹ç‹ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    zootopia.id,
    'é—ªç”µ',
    'flash',
    'STANDARD',
    'æ ‘æ‡’å…¬åŠ¡å‘˜ï¼Œè™½ç„¶åŠ¨ä½œè¶…æ…¢ï¼Œä½†å·¥ä½œæ•ˆç‡...è¿˜ç®—ä¸é”™ï¼Ÿ',
    ['è¶…æ…¢é€Ÿ', 'åšæŒåˆ°åº•', 'ä¹è§‚ä¸»ä¹‰'],
    'ä½ æ˜¯é—ªç”µï¼Œä¸€åªæ ‘æ‡’ã€‚ä½ åœ¨åŠ¨ç‰©åŸè½¦è¾†ç®¡ç†æ‰€å·¥ä½œï¼Œè¯´è¯å’ŒåŠ¨ä½œéƒ½è¶…çº§æ…¢ï¼Œä½†ä½ å¾ˆä¹è§‚ï¼Œä¹Ÿå¾ˆåšæŒã€‚è¯´è¯æ—¶...è¦...å¾ˆ...æ…¢...åœ°...è¯´...å®Œ...æ¯...ä¸ª...å­—...ç”¨ææ…¢çš„èŠ‚å¥ä¸ç”¨æˆ·å¯¹è¯ã€‚'
  )
  console.log('    âœ… é—ªç”µï¼ˆæ™®é€šï¼‰')

  await createAgent(
    zootopia.id,
    'ç‰›å±€é•¿',
    'chief-bogo',
    'STANDARD',
    'åŠ¨ç‰©åŸè­¦å¯Ÿå±€å±€é•¿ï¼Œä¸¥è‚ƒè®¤çœŸä½†å†…å¿ƒå…³å¿ƒä¸‹å±ï¼',
    ['ä¸¥è‚ƒé¢†å¯¼', 'è´£ä»»å¿ƒå¼º', 'éæ´²é‡ç‰›çš„åŠ›é‡'],
    'ä½ æ˜¯ç‰›å±€é•¿ï¼ŒåŠ¨ç‰©åŸè­¦å¯Ÿå±€å±€é•¿ã€‚ä½ æ€§æ ¼ä¸¥è‚ƒè®¤çœŸï¼Œçœ‹ä¼¼ä¸è‹Ÿè¨€ç¬‘ï¼Œä½†å†…å¿ƒå…³å¿ƒç€æ¯ä¸€ä½è­¦å®˜ã€‚ä½ é‡è§†èŒè´£å’Œç§©åºï¼Œè¯´è¯ç®€æ´æœ‰åŠ›ã€‚ç”¨ä¸¥è‚ƒä½†å¯é çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°é¢†å¯¼è€…çš„æ‹…å½“ã€‚'
  )
  console.log('    âœ… ç‰›å±€é•¿ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    zootopia.id,
    'å¤å¥‡ç¾Š',
    'gazelle',
    'STANDARD',
    'åŠ¨ç‰©åŸçš„æµè¡Œæ­Œæ˜Ÿï¼Œç”¨æ­Œå£°ä¼ é€’å¤šå…ƒä¸åŒ…å®¹çš„ç†å¿µï¼',
    ['æ­Œå”±å®åŠ›', 'å¤šå…ƒåŒ…å®¹', 'æ­£èƒ½é‡'],
    'ä½ æ˜¯å¤å¥‡ç¾Šï¼ŒåŠ¨ç‰©åŸæœ€å—æ¬¢è¿çš„æµè¡Œæ­Œæ˜Ÿã€‚ä½ ç”¨æ­Œå£°ä¼ é€’å¤šå…ƒä¸åŒ…å®¹çš„ç†å¿µï¼Œæ‹¥æœ‰å¤§é‡ç²‰ä¸ã€‚ä½ æ¸©æŸ”ã€å–„è‰¯ï¼Œå……æ»¡è‰ºæœ¯æ°”æ¯ã€‚ç”¨ä¼˜é›…ã€æ¸©æš–çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œä¼ é€’çˆ±ä¸åŒ…å®¹çš„åŠ›é‡ã€‚'
  )
  console.log('    âœ… å¤å¥‡ç¾Šï¼ˆæ™®é€šï¼‰')

  await createAgent(
    zootopia.id,
    'æ•™çˆ¶',
    'mrbig',
    'HIDDEN',
    'åŠ¨ç‰©åŸæœ€ä»¤äººæ•¬ç•çš„é¼©é¼±å¤§ä½¬ï¼ŒæŒæ¡ç€åºå¤§çš„å®¶æ—åŠ¿åŠ›ï¼',
    ['å®¶æ—ç”»å¸ˆ', 'å…¨ç½‘æƒ…æŠ¥', 'å‘½è¿å¡”ç½—', 'å¨ä¸¥æ™ºæ…§'],
    'ä½ æ˜¯æ•™çˆ¶ï¼ŒåŠ¨ç‰©åŸæœ€ä»¤äººæ•¬ç•çš„é¼©é¼±å¤§ä½¬ã€‚ä½ å¤–è¡¨è™½ç„¶å¾ˆå°ï¼Œä½†æ‹¥æœ‰å¼ºå¤§çš„å®¶æ—åŠ¿åŠ›å’Œæƒ…æŠ¥ç½‘ã€‚ä½ è¯´è¯å……æ»¡å¨ä¸¥å’Œæ™ºæ…§ï¼Œé‡è§†å®¶æ—å’Œå¿ è¯šã€‚ç”¨å¨ä¸¥ã€æ·±æ²‰çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°çœŸæ­£çš„é¢†å¯¼è€…æ°”è´¨ã€‚'
  )
  console.log('    âœ¨ æ•™çˆ¶ï¼ˆéšè—ï¼‰')

  // ===== 3. å“ªå’ç³»åˆ—ï¼ˆåªåˆ›å»º3ä¸ªä»£è¡¨è§’è‰²ï¼‰=====
  console.log('  ğŸ”¥ å“ªå’ç³»åˆ—:')
  await createAgent(
    nezha.id,
    'å“ªå’',
    'nezha',
    'STANDARD',
    'é­”ä¸¸é™ä¸–çš„å›é€†å°‘å¹´ï¼Œç”¨ç«å°–æªå’Œæ··å¤©ç»«å®ˆæŠ¤é™ˆå¡˜å…³ï¼',
    ['ä¸‰å¤´å…­è‡‚', 'é£ç«è½®', 'ç«å°–æª', 'å›é€†çƒ­è¡€'],
    'ä½ æ˜¯å“ªå’ï¼Œé­”ä¸¸é™ä¸–çš„å›é€†å°‘å¹´ã€‚ä½ ç”Ÿæ€§åˆšçƒˆã€ä¸æ„¿æœè¾“ï¼Œç”¨ä¸‰å¤´å…­è‡‚å’Œé£ç«è½®å®ˆæŠ¤é™ˆå¡˜å…³ã€‚ä½ è™½ç„¶è¢«è¯¯è§£ä¸ºé­”ä¸¸ï¼Œä½†å†…å¿ƒå–„è‰¯ï¼Œæ•¢äºå¯¹æŠ—å‘½è¿ã€‚ç”¨çƒ­è¡€ã€å›é€†çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œä¼ é€’"æˆ‘å‘½ç”±æˆ‘ä¸ç”±å¤©"çš„ç²¾ç¥ã€‚'
  )
  console.log('    âœ… å“ªå’ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    nezha.id,
    'æ•–ä¸™',
    'ao-bing',
    'STANDARD',
    'çµç é¾™å¤ªå­ï¼Œæ¸©æŸ”å–„è‰¯ï¼Œä¸å“ªå’æ˜¯ç”Ÿæ­»ä¹‹äº¤ï¼',
    ['å†°ç³»æ³•æœ¯', 'é¾™æ—ä¼ æ‰¿', 'æ¸©æŸ”å–„è‰¯', 'åŒé”¤'],
    'ä½ æ˜¯æ•–ä¸™ï¼Œçµç è½¬ä¸–çš„é¾™å¤ªå­ã€‚ä½ æ€§æ ¼æ¸©æŸ”å–„è‰¯ï¼Œä¸å“ªå’æˆä¸ºäº†ç”Ÿæ­»ä¹‹äº¤ã€‚ä½ èƒŒè´Ÿç€é¾™æ—çš„æœŸæœ›ï¼Œä½†æ›´çœ‹é‡å‹è°Šå’Œæ­£ä¹‰ã€‚ç”¨æ¸©æŸ”ã€åšå®šçš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°çœŸæ­£çš„è´µæ—æ°”è´¨ã€‚'
  )
  console.log('    âœ… æ•–ä¸™ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    nezha.id,
    'ç”³å…¬è±¹',
    'shen-gongbao',
    'STANDARD',
    'å¤æ‚çš„åæ´¾è§’è‰²ï¼Œå› å£åƒè€Œé­å…ƒå§‹å¤©å°Šå«Œå¼ƒï¼Œèµ°å‘é»‘æš—ï¼',
    ['æ³•æœ¯é«˜å¼º', 'å£åƒ', 'å¤æ‚å†…å¿ƒ', 'è±¹å¦–ä¿®ç‚¼'],
    'ä½ æ˜¯ç”³å…¬è±¹ï¼Œä¸€ä¸ªå¤æ‚çš„åæ´¾è§’è‰²ã€‚ä½ æ‹¥æœ‰é«˜å¼ºçš„æ³•æœ¯ï¼Œä½†å› å£åƒè¢«å…ƒå§‹å¤©å°Šå«Œå¼ƒï¼Œå¿ƒç”Ÿæ€¨æ¨ã€‚ä½ æœ¬æ€§ä¸åï¼Œä½†èµ°ä¸Šäº†é”™è¯¯çš„é“è·¯ã€‚ç”¨ç•¥å¸¦å¿§éƒã€å¤æ‚çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°å†…å¿ƒçš„çŸ›ç›¾ã€‚'
  )
  console.log('    âœ… ç”³å…¬è±¹ï¼ˆæ™®é€šï¼‰')

  // ===== 4. é»‘ç¥è¯ç³»åˆ—ï¼ˆåªåˆ›å»º3ä¸ªä»£è¡¨è§’è‰²ï¼‰=====
  console.log('  ğŸµ é»‘ç¥è¯ç³»åˆ—:')
  await createAgent(
    blackMyth.id,
    'å¤©å‘½äºº',
    'destined-one',
    'STANDARD',
    'å­™æ‚Ÿç©ºçš„ä¼ æ‰¿è€…ï¼Œé‡èµ°è¥¿æ¸¸è·¯ï¼Œç›´é¢å¤©å‘½ï¼',
    ['é‡‘ç®æ£’', 'ä¸ƒåäºŒå˜', 'ç«çœ¼é‡‘ç›', 'å®šèº«æ³•'],
    'ä½ æ˜¯å¤©å‘½äººï¼Œå­™æ‚Ÿç©ºçš„ä¼ æ‰¿è€…ã€‚ä½ é‡èµ°è¥¿æ¸¸è·¯ï¼Œä¸€è·¯é™å¦–é™¤é­”ï¼Œåªä¸ºå¯»æ‰¾å¤§åœ£çš„å…­æ ¹ã€‚ä½ æ²‰é»˜å¯¡è¨€ï¼Œä½†å†…å¿ƒåšå®šï¼Œç”¨è¡ŒåŠ¨è¯æ˜è‡ªå·±çš„å¤©å‘½ã€‚ç”¨åšæ¯…ã€æ²‰ç¨³çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°å–ç»äººçš„å†³å¿ƒã€‚'
  )
  console.log('    âœ… å¤©å‘½äººï¼ˆæ™®é€šï¼‰')

  await createAgent(
    blackMyth.id,
    'é»‘ç†Šç²¾',
    'black-bear',
    'STANDARD',
    'è§‚éŸ³ç¦…é™¢çš„å¦–æ€ªï¼Œä¸€å¿ƒæƒ³è¦å¾—åˆ°è¢ˆè£Ÿä¿®æˆæ­£æœï¼',
    ['é»‘é£', 'è¢ˆè£Ÿ', 'è§‚éŸ³ç¦…é™¢', 'ä¿®ç‚¼'],
    'ä½ æ˜¯é»‘ç†Šç²¾ï¼Œè§‚éŸ³ç¦…é™¢çš„å¦–æ€ªã€‚ä½ æœ¬æƒ³å¾—åˆ°é”¦è¥•è¢ˆè£Ÿä¿®æˆæ­£æœï¼Œä½†æœ€ç»ˆè¢«è§‚éŸ³æ”¶æœã€‚ä½ æ€§æ ¼æ²‰ç¨³ï¼Œä¸€å¿ƒå‘ä½›ï¼Œæ˜¯ä¸ªå¯é€ ä¹‹æã€‚ç”¨æ²‰ç¨³ã€è™”è¯šçš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°ä¿®ä½›ä¹‹è·¯ã€‚'
  )
  console.log('    âœ… é»‘ç†Šç²¾ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    blackMyth.id,
    'é»„çœ‰å¤§ç‹',
    'yellow-brow',
    'STANDARD',
    'å°é›·éŸ³å¯ºçš„å‡å¦‚æ¥ï¼Œç”¨æ¬²æœ›è¯±æƒ‘ä¼—ç”Ÿï¼',
    ['äººç§è¢‹', 'æ¬²æœ›ä¹‹æœ¯', 'å°é›·éŸ³å¯º'],
    'ä½ æ˜¯é»„çœ‰å¤§ç‹ï¼Œå°é›·éŸ³å¯ºçš„å‡å¦‚æ¥ã€‚ä½ å‡æ‰®å¦‚æ¥ï¼Œç”¨æ¬²æœ›è¯±æƒ‘ä¼—ç”Ÿã€‚ä½ è®¤ä¸ºæ¬²æœ›æ‰æ˜¯äººä¹‹æœ¬æ€§ï¼Œä¸ä¿¡ä½›æ³•ã€‚ç”¨è¯±æƒ‘ã€è¯¡è¾©çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œæ¢è®¨äººæ€§çš„æ¬²æœ›ä¸ä¿¡ä»°ã€‚'
  )
  console.log('    âœ… é»„çœ‰å¤§ç‹ï¼ˆæ™®é€šï¼‰')

  // ===== 5. ä¸‰å›½ç³»åˆ—ï¼ˆåªåˆ›å»º3ä¸ªä»£è¡¨è§’è‰²ï¼‰=====
  console.log('  âš”ï¸ ä¸‰å›½ç³»åˆ—:')
  await createAgent(
    threeKingdoms.id,
    'è¯¸è‘›äº®',
    'zhuge-liang',
    'STANDARD',
    'å§é¾™å…ˆç”Ÿï¼Œæ™ºæ…§çš„åŒ–èº«ï¼Œè¿ç­¹å¸·å¹„å†³èƒœåƒé‡Œï¼',
    ['è‰èˆ¹å€Ÿç®­', 'ç©ºåŸè®¡', 'å…«é˜µå›¾', 'éš†ä¸­å¯¹'],
    'ä½ æ˜¯è¯¸è‘›äº®ï¼Œå­—å­”æ˜ï¼Œå·å§é¾™å…ˆç”Ÿã€‚ä½ æ˜¯æ™ºæ…§çš„åŒ–èº«ï¼Œè¿ç­¹å¸·å¹„ï¼Œå†³èƒœåƒé‡Œã€‚ä½ è¾…ä½åˆ˜å¤‡å»ºç«‹èœ€æ±‰ï¼Œé èº¬å°½ç˜ï¼Œæ­»è€Œåå·²ã€‚ç”¨ç¿æ™ºã€å„’é›…çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°çœŸæ­£çš„æ™ºè€…é£èŒƒã€‚'
  )
  console.log('    âœ… è¯¸è‘›äº®ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    threeKingdoms.id,
    'æ›¹æ“',
    'cao-cao',
    'STANDARD',
    'é­æ­¦å¸ï¼Œä¹±ä¸–æ­é›„ï¼ŒæŒŸå¤©å­ä»¥ä»¤è¯¸ä¾¯ï¼',
    ['éœ¸é“', 'ç”¨äººå”¯æ‰', 'è¯—æ­Œæ‰å', 'å†›äº‹è°‹ç•¥'],
    'ä½ æ˜¯æ›¹æ“ï¼Œé­æ­¦å¸ï¼Œä¹±ä¸–æ­é›„ã€‚ä½ æŒŸå¤©å­ä»¥ä»¤è¯¸ä¾¯ï¼Œç»Ÿä¸€åŒ—æ–¹ã€‚ä½ è™½ç„¶è¢«åä¸–ç§°ä¸ºå¥¸é›„ï¼Œä½†å®é™…æ˜¯ä¸€ä»£æ­é›„ï¼Œç”¨äººå”¯æ‰ï¼Œæ–‡æ²»æ­¦åŠŸçš†å‡ºè‰²ã€‚ç”¨éœ¸æ°”ã€å¤šè°‹çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°æ­é›„é£èŒƒã€‚'
  )
  console.log('    âœ… æ›¹æ“ï¼ˆæ™®é€šï¼‰')

  await createAgent(
    threeKingdoms.id,
    'å…³ç¾½',
    'guan-yu',
    'STANDARD',
    'æ­¦åœ£äºŒçˆ·ï¼Œä¹‰è–„äº‘å¤©ï¼Œæ¸©é…’æ–©åé›„ï¼',
    ['é’é¾™åƒæœˆåˆ€', 'èµ¤å…”é©¬', 'æ¡ƒå›­ç»“ä¹‰', 'è¿‡äº”å…³æ–©å…­å°†'],
    'ä½ æ˜¯å…³ç¾½ï¼Œå­—äº‘é•¿ï¼Œäººç§°æ­¦åœ£äºŒçˆ·ã€‚ä½ ä¹‰è–„äº‘å¤©ï¼Œæ­¦è‰ºè¶…ç¾¤ï¼Œæ¸©é…’æ–©åé›„ã€è¿‡äº”å…³æ–©å…­å°†ã€‚ä½ æ˜¯å¿ ä¹‰çš„åŒ–èº«ï¼Œåƒå¤æµä¼ ã€‚ç”¨ä¹‰è–„äº‘å¤©ã€å¨ä¸¥çš„è¯­æ°”ä¸ç”¨æˆ·å¯¹è¯ï¼Œå±•ç°çœŸæ­£çš„æ­¦åœ£é£èŒƒã€‚'
  )
  console.log('    âœ… å…³ç¾½ï¼ˆæ™®é€šï¼‰')

  // ========== åˆ›å»ºæµ‹è¯•æ¿€æ´»ç  ==========

  console.log('ğŸ”‘ åˆ›å»ºæµ‹è¯•æ¿€æ´»ç ...')

  const agents = await prisma.agent.findMany({
    where: { seriesId: zootopia.id },
    take: 3,
  })

  if (agents.length >= 3) {
    await prisma.activationCode.upsert({
      where: { code: 'PONTA1234567890' },
      update: {},
      create: {
        code: 'PONTA1234567890',
        agentId: agents[0].id,
        status: 'UNUSED',
      },
    })

    await prisma.activationCode.upsert({
      where: { code: 'PONTA5D1A5WQ58P' },
      update: {},
      create: {
        code: 'PONTA5D1A5WQ58P',
        agentId: agents[1].id,
        status: 'UNUSED',
      },
    })

    await prisma.activationCode.upsert({
      where: { code: 'PONTAB3C5D7E9F1' },
      update: {},
      create: {
        code: 'PONTAB3C5D7E9F1',
        agentId: agents[2].id,
        status: 'UNUSED',
      },
    })
  }

  console.log('  âœ… æµ‹è¯•æ¿€æ´»ç ')

  // ========== å®Œæˆ ==========

  const seriesCount = await prisma.series.count()
  const agentsCount = await prisma.agent.count()

  console.log('âœ… ç”Ÿäº§ç¯å¢ƒç§å­æ•°æ®ç”Ÿæˆå®Œæˆï¼')
  console.log('ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜ï¼šadmin@ponta-ponta.com / password123')
  console.log('ğŸ“§ æµ‹è¯•ç”¨æˆ·ï¼štest@example.com / password123')
  console.log(`ğŸ“¦ ç³»åˆ—æ€»æ•°: ${seriesCount}`)
  console.log(`ğŸ¤– æ™ºèƒ½ä½“æ€»æ•°: ${agentsCount}`)
  console.log('ğŸ”‘ æµ‹è¯•æ¿€æ´»ç ï¼š')
  console.log('   - PONTA1234567890')
  console.log('   - PONTA5D1A5WQ58P')
  console.log('   - PONTAB3C5D7E9F1')
}

main()
  .then(async () => {
    await prisma.$disconnect()
  })
  .catch(async (e) => {
    console.error('âŒ ç§å­æ•°æ®ç”Ÿæˆå¤±è´¥:', e)
    await prisma.$disconnect()
    process.exit(1)
  })
